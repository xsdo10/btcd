# ä»¥å¤ªåŠæºç å¦‚ä½•è·‘

## ä¸€ã€å®‰è£…ä¾èµ–

### 1.1 å®‰è£…Goè¯­è¨€ç¯å¢ƒ
ä»¥å¤ªåŠæºç è¿è¡Œçš„åŸºç¡€æ˜¯Goè¯­è¨€å¼€å‘ç¯å¢ƒé…ç½®ã€‚ä½œä¸ºåŒºå—é“¾å¼€å‘çš„æ ¸å¿ƒå·¥å…·é“¾ï¼ŒGoè¯­è¨€ç¯å¢ƒæ­å»ºéœ€æ³¨æ„ä»¥ä¸‹è¦ç‚¹ï¼š
- ä»[Goè¯­è¨€å®˜ç½‘](https://golang.org/dl/)ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„å®‰è£…åŒ…
- æ¨èä½¿ç”¨1.18+ç‰ˆæœ¬ä»¥è·å¾—æœ€ä½³å…¼å®¹æ€§
- å®‰è£…å®Œæˆåæ‰§è¡Œ`go version`éªŒè¯å®‰è£…çŠ¶æ€

ğŸ‘‰ [åŒºå—é“¾å¼€å‘å·¥å…·ä¸‹è½½](https://bit.ly/okx_welcome)

### 1.2 å®‰è£…ä¾èµ–åº“
é€šè¿‡Goæ¨¡å—ç®¡ç†å·¥å…·è·å–ä»¥å¤ªåŠæ ¸å¿ƒä¾èµ–åº“ï¼š
```bash
go get -u github.com/ethereum/go-ethereum
```
è¯¥å‘½ä»¤å°†è‡ªåŠ¨å®‰è£…ä»¥ä¸‹å…³é”®ç»„ä»¶ï¼š
- cryptoåŠ å¯†åº“
- p2pç½‘ç»œé€šä¿¡æ¨¡å—
- è™šæ‹Ÿæœºæ‰§è¡Œç¯å¢ƒ

### 1.3 é…ç½®ç¯å¢ƒå˜é‡
ç¼–è¾‘shellé…ç½®æ–‡ä»¶ï¼ˆ`.bashrc`æˆ–`.zshrc`ï¼‰æ·»åŠ ï¼š
```bash
export GOPATH=$HOME/go
export PATH=$PATH:/usr/local/go/bin:$GOPATH/bin
```
æ‰§è¡Œ`source ~/.bashrc`ä½¿é…ç½®ç”Ÿæ•ˆï¼Œé€šè¿‡`echo $GOPATH`éªŒè¯ç¯å¢ƒå˜é‡çŠ¶æ€ã€‚

## äºŒã€ç¼–è¯‘æºç 

### 2.1 è·å–æºä»£ç 
ä½¿ç”¨Gitç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå…‹éš†å®˜æ–¹ä»“åº“ï¼š
```bash
git clone https://github.com/ethereum/go-ethereum.git
```
å»ºè®®å®šæœŸæ‰§è¡Œ`git pull`ä¿æŒä»£ç åŒæ­¥æ›´æ–°ã€‚

### 2.2 æ‰§è¡Œç¼–è¯‘æ“ä½œ
è¿›å…¥é¡¹ç›®æ ¹ç›®å½•åæ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š
```bash
cd go-ethereum
make geth
```
ç¼–è¯‘å®Œæˆåç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä½äº`build/bin/geth`ï¼ŒéªŒè¯å‘½ä»¤ï¼š
```bash
build/bin/geth version
```

**FAQï¼šå¦‚ä½•ç¡®è®¤ç¼–è¯‘ç¯å¢ƒæ˜¯å¦å®Œæ•´ï¼Ÿ**
> æ‰§è¡Œ`make geth`æ—¶è‹¥å‡ºç°"missing dependencies"æç¤ºï¼Œå»ºè®®è¿è¡Œ`go mod tidy`æ¸…ç†ä¾èµ–å…³ç³»ï¼Œå¹¶æ£€æŸ¥Goç¯å¢ƒç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚

## ä¸‰ã€åˆå§‹åŒ–èŠ‚ç‚¹

### 3.1 åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•
å»ºè®®é‡‡ç”¨ç‹¬ç«‹åˆ†åŒºå­˜å‚¨åŒºå—é“¾æ•°æ®ï¼š
```bash
mkdir -p ~/ethereum-data/chaindata
```
å¯¹äºä¸»ç½‘èŠ‚ç‚¹å»ºè®®é¢„ç•™2TBä»¥ä¸Šå­˜å‚¨ç©ºé—´ã€‚

### 3.2 é…ç½®åˆ›ä¸–åŒºå—
é€šè¿‡`genesis.json`å®šä¹‰ç½‘ç»œå‚æ•°ï¼š
```json
{
  "config": {
    "chainId": 1515,
    "homesteadBlock": 0,
    "eip150Block": 0,
    "eip155Block": 0
  },
  "difficulty": "0x20000",
  "gasLimit": "0x1e1338",
  "alloc": {
    "7df9a875a174b3bc565e63000023ba774c75673d": {
      "balance": "0x100000000000000000000"
    }
  }
}
```

## å››ã€ç½‘ç»œé…ç½®

### 4.1 ç§æœ‰ç½‘ç»œæ­å»º
é…ç½®èŠ‚ç‚¹å¯åŠ¨å‚æ•°ï¼š
```bash
build/bin/geth \
  --datadir ~/ethereum-data \
  --networkid 1515 \
  --nodiscover \
  --maxpeers 3 \
  --http \
  --http.addr 0.0.0.0 \
  --http.port 8545 \
  --http.api "eth,net,web3,personal" \
  --http.corsdomain "*" \
  --http.vhosts "*" \
  --ipcdisable \
  --allow-insecure-unlock
```

### 4.2 èŠ‚ç‚¹å‘ç°æœºåˆ¶
é…ç½®å¼•å¯¼èŠ‚ç‚¹ï¼ˆBootnodeï¼‰ï¼š
```bash
build/bin/geth \
  --datadir ~/ethereum-data \
  --networkid 1515 \
  --bootnodes enode://3f81a4d8057d6c12380d05a2a371383e9674c4212950d4512f08355280513642@[::]:30301
```

**FAQï¼šç§æœ‰ç½‘ç»œèŠ‚ç‚¹æ— æ³•è¿æ¥å¦‚ä½•æ’æŸ¥ï¼Ÿ**
> 1. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®æ˜¯å¦å¼€æ”¾30303ç«¯å£
> 2. éªŒè¯Bootnodeåœ°å€æ ¼å¼æ˜¯å¦æ­£ç¡®
> 3. æ£€æŸ¥ç½‘ç»œIDæ˜¯å¦ä¸€è‡´
> 4. æŸ¥çœ‹èŠ‚ç‚¹æ—¥å¿—ä¸­çš„peerè¿æ¥çŠ¶æ€

## äº”ã€èŠ‚ç‚¹ç®¡ç†

### 5.1 æ§åˆ¶å°äº¤äº’
å¯åŠ¨äº¤äº’å¼æ§åˆ¶å°ï¼š
```bash
build/bin/geth --datadir ~/ethereum-data console
```
å¸¸ç”¨ç®¡ç†å‘½ä»¤ï¼š
```javascript
// æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯
admin.nodeInfo

// åˆ›å»ºæ–°è´¦æˆ·
personal.newAccount("your_password")

// æŸ¥è¯¢è´¦æˆ·ä½™é¢
eth.getBalance(eth.accounts[0], "latest")
```

### 5.2 åŒæ­¥æ¨¡å¼é€‰æ‹©
| åŒæ­¥æ¨¡å¼   | ç‰¹ç‚¹                          | é€‚ç”¨åœºæ™¯             |
|------------|-------------------------------|----------------------|
| full       | å®Œæ•´éªŒè¯æ‰€æœ‰åŒºå—              | ä¸»ç½‘å…¨èŠ‚ç‚¹           |
| fast       | å¿«é€ŸåŒæ­¥çŠ¶æ€æ•°æ®              | å¼€å‘æµ‹è¯•ç¯å¢ƒ         |
| light      | è½»èŠ‚ç‚¹æ¨¡å¼                    | ç§»åŠ¨ç«¯/èµ„æºå—é™è®¾å¤‡  |

## å…­ã€æ™ºèƒ½åˆçº¦å¼€å‘

### 6.1 ç¯å¢ƒæ­å»º
æ¨èå¼€å‘å·¥å…·ç»„åˆï¼š
- ç¼–è¾‘å™¨ï¼šVS Code + Solidityæ’ä»¶
- ç¼–è¯‘å™¨ï¼šsolc 0.8.0+
- æ¡†æ¶ï¼šTruffleæˆ–Hardhat

ğŸ‘‰ [æ™ºèƒ½åˆçº¦å¼€å‘å·¥å…·é›†](https://bit.ly/okx_welcome)

### 6.2 åˆçº¦éƒ¨ç½²ç¤ºä¾‹
ä½¿ç”¨Remix IDEéƒ¨ç½²æµç¨‹ï¼š
1. åœ¨[Remixåœ¨çº¿IDE](https://remix.ethereum.org)åˆ›å»ºæ–°æ–‡ä»¶`SimpleStorage.sol`
2. ç¼–å†™åˆçº¦ä»£ç å¹¶ç¼–è¯‘
3. é€‰æ‹©"Deploy & Run Transactions"æ ‡ç­¾
4. è¿æ¥MetaMaské’±åŒ…
5. ç‚¹å‡»"Deploy"æŒ‰é’®éƒ¨ç½²åˆçº¦

**FAQï¼šå¦‚ä½•é™ä½åˆçº¦éƒ¨ç½²æˆæœ¬ï¼Ÿ**
> 1. ä¼˜åŒ–åˆçº¦ä»£ç ä½“ç§¯
> 2. é€‰æ‹©Gasä»·æ ¼è¾ƒä½æ—¶æ®µéƒ¨ç½²
> 3. ä½¿ç”¨åˆçº¦å‹ç¼©å·¥å…·
> 4. é‡‡ç”¨Layer2æ‰©å®¹æ–¹æ¡ˆ

## ä¸ƒã€æµ‹è¯•ä¸è°ƒè¯•

### 7.1 æœ¬åœ°æµ‹è¯•ç½‘ç»œ
ä½¿ç”¨Ganacheåˆ›å»ºæœ¬åœ°åŒºå—é“¾ï¼š
```bash
npm install -g ganache
ganache-cli --port 8545
```

### 7.2 å•å…ƒæµ‹è¯•æ¡†æ¶
Truffleæµ‹è¯•ç¤ºä¾‹ï¼š
```javascript
contract("SimpleStorage", (accounts) => {
  let simpleStorage;
  
  beforeEach(async () => {
    simpleStorage = await SimpleStorage.deployed();
  });

  it("should store value correctly", async () => {
    await simpleStorage.set(89, { from: accounts[0] });
    const result = await simpleStorage.get();
    assert(result.toNumber() === 89);
  });
});
```

## å…«ã€ä¸»ç½‘éƒ¨ç½²

### 8.1 è´¦æˆ·å®‰å…¨
åˆ›å»ºä¸»ç½‘è´¦æˆ·æ—¶å»ºè®®ï¼š
- ä½¿ç”¨ç¡¬ä»¶é’±åŒ…å­˜å‚¨ç§é’¥
- å¯ç”¨å¤šé‡ç­¾åæœºåˆ¶
- å®šæœŸå¤‡ä»½keystoreæ–‡ä»¶

### 8.2 Infuraé›†æˆ
ä½¿ç”¨Infuraéƒ¨ç½²åˆçº¦ç¤ºä¾‹ï¼š
```javascript
const HDWalletProvider = require('@truffle/hdwallet-provider');
const provider = new HDWalletProvider(
  'your_mnemonic_phrase',
  'https://mainnet.infura.io/v3/YOUR_PROJECT_ID'
);
```

## ä¹ã€æ€§èƒ½ä¼˜åŒ–

### 9.1 èŠ‚ç‚¹è°ƒä¼˜å‚æ•°
```bash
build/bin/geth \
  --cache=4096 \
  --miner.threads=2 \
  --txpool.lifetime=30m \
  --gcmode=archive
```

### 9.2 ç›‘æ§æŒ‡æ ‡
å…³é”®ç›‘æ§æŒ‡æ ‡ï¼š
- å½“å‰åŒºå—é«˜åº¦ï¼ˆeth.blockNumberï¼‰
- Gasä½¿ç”¨ç‡ï¼ˆeth.getBlock("latest").gasUsedï¼‰
- èŠ‚ç‚¹å»¶è¿Ÿï¼ˆadmin.peersï¼‰

ğŸ‘‰ [åŒºå—é“¾æ€§èƒ½ç›‘æ§å·¥å…·](https://bit.ly/okx_welcome)

## åã€å¸¸è§é—®é¢˜

**Qï¼šç¼–è¯‘æ—¶æç¤º"missing go.sum entry"å¦‚ä½•è§£å†³ï¼Ÿ**
Aï¼šæ‰§è¡Œ`go mod tidy`æ¸…ç†æ¨¡å—ä¾èµ–ï¼Œå¹¶æ£€æŸ¥go.modæ–‡ä»¶é…ç½®ã€‚

**Qï¼šèŠ‚ç‚¹åŒæ­¥å¡ä½å¦‚ä½•å¤„ç†ï¼Ÿ**
Aï¼šå°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š
1. åˆ é™¤chaindataç›®å½•é‡æ–°åŒæ­¥
2. åˆ‡æ¢ä¸ºfastæ¨¡å¼åŒæ­¥
3. æ£€æŸ¥ç£ç›˜IOæ€§èƒ½

**Qï¼šå¦‚ä½•æŸ¥çœ‹åˆçº¦æ‰§è¡Œæ—¥å¿—ï¼Ÿ**
Aï¼šä½¿ç”¨eth.getLogsæ–¹æ³•æŸ¥è¯¢äº‹ä»¶æ—¥å¿—ï¼š
```javascript
eth.getLogs({
  address: "0xYourContractAddress",
  fromBlock: "0x1",
  toBlock: "latest"
})
```

é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¼€å‘è€…å¯ä»¥å®Œæ•´æ­å»ºä»¥å¤ªåŠå¼€å‘ç¯å¢ƒï¼Œå®ç°ä»æºç ç¼–è¯‘åˆ°æ™ºèƒ½åˆçº¦éƒ¨ç½²çš„å…¨æµç¨‹æ“ä½œã€‚å»ºè®®å®šæœŸå…³æ³¨ä»¥å¤ªåŠå®˜æ–¹æ›´æ–°ï¼ŒåŠæ—¶è·å–å®‰å…¨è¡¥ä¸å’ŒåŠŸèƒ½å‡çº§ã€‚